name: 'Deploy'
description: 'Deploy the token list to S3 bucket.'
inputs:
  url:
    environment:
    description: 'Deployment environment (e.g., Test, CI).'
    required: true
    type: string
  bucket:
    description: 'AWS S3 bucket for backups.'
    required: true
    type: string
runs:
  using: 'composite'
  steps:
    - name: Deploy
      shell: bash
      run: |
        - name: Deploy (Test folder)
          if: ${{ inputs.environment == 'Test' }}
          run: aws s3 sync ./src/ s3://${{ inputs.bucket }}/TestFolder --exclude "*" --include "FullList/*.json" --include "ArbTokenLists/*.json"

        - name: Deploy
          if: ${{ inputs.environment == 'CI' }}
          run: aws s3 sync ./src/ s3://${{ inputs.bucket }} --exclude "*" --include "FullList/*.json" --include "ArbTokenLists/*.json" --acl "public-read"
